webpackJsonp([2],{"1alW":function(e,t,o){var r=o("kM2E");r(r.S,"Number",{isInteger:o("AKgy")})},AKgy:function(e,t,o){var r=o("EqjI"),a=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&a(e)===e}},Iwgb:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("RRo+"),a=o.n(r),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("van-nav-bar",{attrs:{title:"首页","left-text":"返回","right-text":"登录","left-arrow":""},on:{"click-left":this.onClickLeft,"click-right":this.onClickRight}})],1)},staticRenderFns:[]};var s={name:"register",data:function(){return{seconds:20,disableBut:!1,ruleForm2:{username:"",pass:"",qqNum:"",photoCode:"",mobileCode:"",recomMan:"",phone:""},rules2:{pass:[{validator:function(e,t,o){""===t.replace(/ /g,"")?o(new Error("密码不能为空格或者为空")):o()},trigger:"blur",required:!0},{min:6,max:15,message:"长度在 6 到 18 个字符",trigger:"blur"}],phone:[{validator:function(e,t,o){if(!t)return o(new Error("手机号不能为空"));setTimeout(function(){a()(t)?t<12999999999||t>18999999999?o(new Error("请输入正确的手机号")):o():o(new Error("请输入正确的手机号"))},100)},trigger:"blur",required:!0}],photoCode:[],qqNum:[],recomMan:[],mobileCode:[{required:!0,message:"请输入短信验证码",trigger:"blur"}],username:[{required:!0,message:"请输入姓名(中文或拼音)",trigger:"blur"},{min:2,max:18,message:"长度在 2 到 18 个字符",trigger:"blur"}]}}},computed:{},components:{Header:o("VU/8")({name:"Header",data:function(){return{active:0}},methods:{onClickLeft:function(){this.$toast("提示文案")},onClickRight:function(){this.$router.push("/login")}}},n,!1,function(e){o("cNDG")},null,null).exports},created:function(){},methods:{getTimesec:function(){var e=this;return e._timer=setInterval(function(){e.seconds=e.seconds-1,1==e.seconds&&clearInterval(e._timer)},1e3),e.seconds},onClickLeft:function(){this.$router.go(-1)},onClickRight:function(){this.$router.push("/login")},showPhotoCode:function(){this.$refs.Imgdata.src="http://localhost:8080/api/Registercontroller/photoCode.do?time="+(new Date).getTime()},obMobileCode:function(){var e=this;e.ruleForm2.phone,e.ruleForm2.photoCode;if(e.ruleForm2.phone)if(e.ruleForm2.phone<12999999999||e.ruleForm2.phone>18999999999)e.$toast("请填写正确手机号");else if(e.$_.isEmpty(e.ruleForm2.photoCode))e.$toast("请填写图片验证码");else{var t=new URLSearchParams;t.append("phone",e.ruleForm2.phone),t.append("photoCode",e.ruleForm2.photoCode),e.seconds=20,e.disableBut=!0,e.getTimesec(),setTimeout(function(){e.disableBut=!1},2e4);e.$axios.post("/api/Registercontroller/sendMsg.do",t).then(function(t){200==t.status?"fail"!=t.data.status?console.log("成功"):(e.disableBut=!1,clearInterval(e._timer),e.$toast(t.data.message)):(e.disableBut=!1,clearInterval(e._timer),e.$toast("获取验证码失败"))}).catch(function(t){e.disableBut=!1,clearInterval(e._timer)})}else e.$toast("手机号不能为空")},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var o=t,r=o.$toast.loading({mask:!0,duration:1e4,message:"加载中..."}),a=new URLSearchParams;a.append("phone",o.ruleForm2.phone),a.append("phoneCode",o.ruleForm2.mobileCode.toString()),a.append("username",o.ruleForm2.username),a.append("password",o.ruleForm2.pass),a.append("qq",o.ruleForm2.qqNum),a.append("introducer",o.ruleForm2.recomMan),o.$axios.post("/api/Registercontroller/registUser.do",a).then(function(e){200==e.status&&e.data?(r.clear(),"fail"!=e.data.status?(o.$toast.success("注册成功"),o.$router.push("/login")):o.$toast(e.data.message)):o.$toast.fail("请求出错")})})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"mr-root"},[o("van-nav-bar",{attrs:{title:"注册","left-text":"返回","right-text":"登录","left-arrow":""},on:{"click-left":e.onClickLeft,"click-right":e.onClickRight}}),e._v(" "),o("div",{staticClass:"register"},[o("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"label-position":"top",rules:e.rules2}},[o("el-form-item",{attrs:{prop:"username"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入您的昵称"},model:{value:e.ruleForm2.username,callback:function(t){e.$set(e.ruleForm2,"username",t)},expression:"ruleForm2.username"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"phone"}},[o("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入您的手机号"},model:{value:e.ruleForm2.phone,callback:function(t){e.$set(e.ruleForm2,"phone",e._n(t))},expression:"ruleForm2.phone"}})],1),e._v(" "),o("el-form-item",{staticClass:"twoInput",attrs:{prop:"photoCode"}},[o("el-input",{attrs:{placeholder:"请输入图片验证码"},model:{value:e.ruleForm2.photoCode,callback:function(t){e.$set(e.ruleForm2,"photoCode",t)},expression:"ruleForm2.photoCode"}},[o("template",{slot:"append"},[o("img",{ref:"Imgdata",attrs:{src:"http://localhost:8080/api/Registercontroller/photoCode.do"},on:{click:function(t){e.showPhotoCode()}}})])],2)],1),e._v(" "),o("el-form-item",{staticClass:"threeInput",attrs:{prop:"mobileCode"}},[o("el-input",{attrs:{placeholder:"请输入您的短信验证码"},model:{value:e.ruleForm2.mobileCode,callback:function(t){e.$set(e.ruleForm2,"mobileCode",e._n(t))},expression:"ruleForm2.mobileCode"}},[e.disableBut?e._e():o("template",{slot:"append"},[o("el-button",{on:{click:function(t){e.obMobileCode("ruleForm2.phone")}}},[e._v("获取验证码\n            ")])],1),e._v(" "),e.disableBut?o("template",{slot:"append"},[o("el-button",{staticStyle:{"background-color":"#c8c9cc",color:"white"}},[e._v(e._s(e.seconds)+"s后获取")])],1):e._e()],2)],1),e._v(" "),o("el-form-item",{attrs:{prop:"pass"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入您的登录密码"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"qqNum"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入您的QQ号"},model:{value:e.ruleForm2.qqNum,callback:function(t){e.$set(e.ruleForm2,"qqNum",t)},expression:"ruleForm2.qqNum"}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"recomMan"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"请输入您的介绍人（没有可不填）"},model:{value:e.ruleForm2.recomMan,callback:function(t){e.$set(e.ruleForm2,"recomMan",t)},expression:"ruleForm2.recomMan"}})],1),e._v(" "),o("div",{staticClass:"goRegis"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm2")}}},[e._v("立即注册")])],1)],1)],1)],1)},staticRenderFns:[]};var i=o("VU/8")(s,l,!1,function(e){o("jT9o")},null,null);t.default=i.exports},"RRo+":function(e,t,o){e.exports={default:o("c45H"),__esModule:!0}},c45H:function(e,t,o){o("1alW"),e.exports=o("FeBl").Number.isInteger},cNDG:function(e,t){},jT9o:function(e,t){}});
//# sourceMappingURL=2.e9efe2252e8baa6667db.js.map